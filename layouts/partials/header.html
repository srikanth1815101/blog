<header class="sticky top-0 z-50 bg-white-50/80 dark:bg-gray-900/80 backdrop-blur-md">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex items-center justify-between h-16">
    <!-- Logo -->
    <a href="/" class="flex items-center gap-1 group">
      <img src="/logo.png" alt="Logo" class="h-10 w-10 object-contain transition-transform duration-200 group-hover:scale-105 leading-none pb-1" style="max-width: 44px; min-width: 36px;" />
      <span class="mx-1 h-7 border-l border-gray-300 dark:border-gray-500 inline-block relative -mt-1"></span>
      <span class="text-4xl font-extrabold bg-gradient-to-r from-blue-600 via-fuchsia-500 to-pink-500 bg-clip-text text-transparent select-none leading-none pb-1">Blog</span>
    </a>
    <!-- Desktop Nav -->
    <nav class="hidden md:flex gap-8 text-base font-medium ml-auto mr-8">
      {{ $current := .RelPermalink }}
      {{ $nav := slice (dict "name" "Home" "url" "/") (dict "name" "Blog" "url" "/posts/") (dict "name" "About" "url" "/about/") }}
      {{ range $nav }}
      <a href="{{ .url }}" class="relative py-2 px-2 transition text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-fuchsia-400 {{ if eq $.RelPermalink .url }}font-bold text-blue-600 dark:text-fuchsia-400{{ end }}">
        {{ .name }}
        <span class="absolute left-0 -bottom-1 w-full h-0.5 rounded bg-gradient-to-r from-blue-600 via-fuchsia-500 to-pink-500 transition-all duration-300 scale-x-0 origin-left {{ if eq $.RelPermalink .url }}scale-x-100{{ end }}"></span>
      </a>
      {{ end }}
    </nav>
    <!-- Theme toggle & mobile menu -->
    <div class="flex items-center gap-2">
      <button id="darkModeToggle" class="p-2 rounded-lg bg-white-50 dark:bg-gray-900 hover:bg-blue-100 dark:hover:bg-fuchsia-900 transition-colors" aria-label="Toggle dark mode">
        <i data-lucide="sun" class="w-5 h-5 hidden dark:block"></i>
        <i data-lucide="moon" class="w-5 h-5 block dark:hidden"></i>
      </button>
      <button id="mobileMenuToggle" class="md:hidden p-2 rounded-lg bg-white-50 dark:bg-gray-900 hover:bg-blue-100 dark:hover:bg-fuchsia-900 transition-colors" aria-label="Open menu">
        <i data-lucide="menu" class="w-5 h-5"></i>
      </button>
    </div>
  </div>
  <!-- Mobile Nav -->
  <div id="mobileMenu" class="hidden md:hidden bg-transparent px-4 pb-4">
    <nav class="flex flex-col gap-2 text-base font-medium">
      {{ range $nav }}
      <a href="{{ .url }}" class="py-2 px-2 text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-fuchsia-400 transition">{{ .name }}</a>
      {{ end }}
    </nav>
  </div>
  <script>
    lucide.createIcons();
    // Dark mode toggle
    const darkModeToggle = document.getElementById('darkModeToggle');
    const html = document.documentElement;
    if (localStorage.getItem('darkMode') === 'true' || (!localStorage.getItem('darkMode') && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
      html.classList.add('dark');
    }
    darkModeToggle.addEventListener('click', () => {
      html.classList.toggle('dark');
      localStorage.setItem('darkMode', html.classList.contains('dark'));
      lucide.createIcons();
    });
    // Mobile menu toggle
    const mobileMenuToggle = document.getElementById('mobileMenuToggle');
    const mobileMenu = document.getElementById('mobileMenu');
    mobileMenuToggle.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  </script>
</header> 